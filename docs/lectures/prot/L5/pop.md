import PDU from '../../../../static/lib/pdu'
import Mermaid from '../../../../static/lib/Mermaid'
import IframeComponent from '../../../../static/lib/iframe'

# POP3

**POP3** (*Post Office Protocol version 3*) — это протокол для получения электронной почты из удаленного почтового ящика. Он используется клиентами электронной почты для загрузки сообщений с почтового сервера на устройство пользователя. Работает по TCP на 110 порту.

Основные особенности:

1. **Простота протокола**:
   - POP3 очень простой и широко поддерживаемый протокол.
   - Использует текстовые команды для выполнения операций.

2. **Загрузка и удаление**:
   - Сообщения скачиваются на устройство пользователя и обычно удаляются с сервера (в отличие от IMAP, где сообщения хранятся на сервере).

3. **Локальное хранение**:
   - После загрузки письма хранятся на устройстве пользователя и доступны без подключения к интернету.

4. **Одно устройство**:
   - POP3 оптимален для работы на одном устройстве, поскольку изменения (например, удаление письма) не синхронизируются между устройствами.

## Режимы работы POP3

**POP3** (Протокол простого почтового отделения версии 3) работает с почтовыми серверами и обеспечивает доступ к почте посредством серии режимов работы. Всего существует три режима:

1. **Authorization (Авторизация)**
2. **Transaction (Транзакция)**
3. **Update (Обновление)**

### 1. Authorization (Авторизация)
На этом этапе клиент передает серверу свои учетные данные для авторизации. Успешное входите ведет к переходу в режим **Transaction**.

```
USER username
                                            +OK
PASS password
                                            +OK Mailbox locked and ready
```

Если указаны неверные учетные данные, сервер отвечает:
```
                                            -ERR Invalid credentials
```


### 2. Transaction (Транзакция)
После успешной авторизации клиент может выполнять различные действия с почтовым ящиком, включая загрузку или удаление сообщений.

#### Основные команды:

- **STAT** — Показывает общее количество и размер сообщений:
```
STAT
                                            +OK 3 1200
```

- **LIST** — Список сообщений с размером:
```
LIST
                                            +OK 3 messages
                                            1 400
                                            2 500
                                            3 300
                                            .
```

- **RETR** — Загрузка письма:
```
RETR 1
                                            +OK Message follows
                                            From: sender@example.com
                                            To: user@example.com
                                            Subject: Test Message

                                            This is the email content.
```

- **DELE** — Удаление сообщения:
```
DELE 1
                                            +OK Message marked for deletion
```

- **NOOP** — Проверка соединения (не выполняет действий):
```
NOOP
                                            +OK
```

- **QUIT** — Завершение сессии:
```
QUIT
                                            +OK Goodbye
```

### 3. Update (Обновление)
Режим обновления активируется после отправки команды **QUIT**. В этом режиме сервер очищает письма, помеченные для удаления, и закрывает соединение.

```
QUIT
                                            +OK Goodbye
```

После этого сообщение, помеченное через **DELE**, удаляется, и сервер завершает сессию.

## Коды ответа сервера

1. Положительные коды
    Положительный ответ обозначается строкой, начинающейся с `+OK`. Он указывает, что команда успешно выполнена.

2. Отрицательные коды
    Отрицательный ответ обозначается строкой, начинающейся с `-ERR`. Он сообщает о возникновении ошибки или невозможности выполнить команду.
