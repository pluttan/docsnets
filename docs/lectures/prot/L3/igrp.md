import { BlockMath, InlineMath } from 'react-katex';
import 'katex/dist/katex.min.css';
import PDU from '../../../../static/lib/pdu'
import IframeComponent from '../../../../static/lib/iframe'

# IGRP/EIGRP

**IGRP** (*Interior Gateway Routing Protocol*) — это протокол динамической маршрутизации, разработанный компанией Cisco в середине 1980-х годов. Он предназначен для использования внутри автономных систем (Interior Gateway Protocol, IGP) и является проприетарным решением Cisco. 

## Основные характеристики IGRP:
1. **Тип протокола:**
   - Протокол **дистанционно-векторной маршрутизации (Distance-Vector Routing Protocol)**.
   - Использует алгоритм Беллмана-Форда для расчета маршрутов.
   - **Классовый протокол маршрутизации (Classful Protocol):**
     - Не поддерживает маски подсети переменной длины (CIDR).
     - Не передает информацию о маске подсети вместе с маршрутами.

2. **Широковещательные обновления:**
   - Обновления маршрутов передаются по широковещательному адресу каждые **90 секунд**.

3. **Масштабируемость:**
   - Поддерживает до **255 хопов** (по умолчанию максимум — **100 хопов**).
   - Более масштабируем, чем RIP (с его ограничением в 15 хопов).

4. **Административная дистанция:**
   - По умолчанию административная дистанция IGRP равна **100**.

5. **Метрика:**
   - Композитная метрика, учитывающая:
     - Пропускную способность (Bandwidth).
     - Задержку (Delay).
     - Надежность (Reliability).
     - Нагрузку (Load).
   - Основная метрика рассчитывается по следующей формуле:
<BlockMath math="\text{Metric} = (\text{K1} \cdot \text{Bandwidth} + \frac{\text{K2} \cdot \text{Bandwidth}}{256-\text{Load}} + \text{K3} \cdot \text{Delay}) \cdot \frac{\text{K5}}{R+\text{K4}}"/>
где ( K1, K2, K3 ) — настраиваемые коэффициенты. По умолчанию ( K1 = K3 = 1 ), ( K2 = K4 = K5 = 0 ).

## Пакет IGRP

<PDU maxCellSize={24} name={'ICMP пакет'} data={[
    { 
        size: 4, 
        name: "Version"
    },
    { 
        size: 4, 
        name: "OP code", 
        desc: `Операционный код - определяет функционал сообщения` 
    },
    { 
        size: 8, 
        name: "Edition", 
        desc: `Контроль версии` 
    },
    { 
        size: 8, 
        name: "AS number", 
        desc: `Номер автономной системы - зоны, которая подчиняется одной политики администрирования` 
    },
    { 
        size: 16, 
        name: "Number of iterior routes", 
        desc: `Количество внутренних маршрутов` 
    },
    { 
        size: 16, 
        name: "Number of system routes", 
        desc: `Количество системных маршрутов` 
    },
    { 
        size: 16, 
        name: "Number of extention routes", 
        desc: `Количество внешних маршрутов` 
    },
    { 
        size: 16, 
        name: "Checksum"
    },
    { 
        size: 24, 
        name: "IP address"
    },
    { 
        size: 24, 
        name: "Delay"
    },
    { 
        size: 24, 
        name: "Bandwidth"
    },
    { 
        size: 16, 
        name: "MTU",
        desc: `Maximum extention unit - сколько данных за одну транзацкию` 
    },
    { 
        size: 8, 
        name: "Relability"
    },
    { 
        size: 8, 
        name: "Load"
    },
    { 
        size: 8, 
        name: "Hop count"
    }
]} />

## Отличия между EIGRP и IGRP

**EIGRP (Enhanced Interior Gateway Routing Protocol)** является улучшенной версией **IGRP (Interior Gateway Routing Protocol)**, разработанной Cisco. Ниже приведены основные различия между этими протоколами:

---

| **Характеристика**             | **IGRP**                                    | **EIGRP**                                   |
|---------------------------------|---------------------------------------------|--------------------------------------------|
| **Тип протокола**              | Протокол дистанционно-векторной маршрутизации (Distance-Vector). | Гибридный протокол маршрутизации (Hybrid). |
| **Метрика**                    | Учитывает **пропускную способность**, **задержку**, **надежность**, **нагрузку**, **MTU**. | Учитывает те же параметры. |
| **Сходимость**                 | Использует алгоритмы с медленной сходимостью. | Использует **DUAL (Diffusing Update Algorithm)** для быстрой сходимости и предотвращения петель маршрутизации. |
| **Балансировка нагрузки**      | Поддерживает только балансировку по маршрутам с **равной стоимостью** (Equal-Cost). | Поддерживает балансировку как по **равной**, так и по **неравной стоимости** (Variance). |
| **Тип обновлений**             | Периодические полные обновления (каждые 90 секунд). | Инкрементальные обновления, только при изменении состояния сети. |
| **Административная дистанция** | 100 для внутренних маршрутов.               | 90 для внутренних маршрутов, 170 для внешних. |
| **Поддержка VLSM и CIDR**      | Нет, работает только с классовой маршрутизацией. | Да, поддерживает бесклассовую маршрутизацию (VLSM и CIDR). |
| **Мультикаст-адрес**           | Не использует мультикаст.                   | Использует мультикаст-адрес **224.0.0.10** для обновлений. |
| **Тип соседства**              | Не требует явного установления соседства.   | Требует установления соседства с соседними маршрутизаторами. |
| **Проприетарность**            | Проприетарный протокол Cisco.               | Также проприетарный, но в 2013 году опубликован как стандарт IETF. |
| **Поддержка протоколов**       | IPv4, IPX.                                  | IPv4, IPv6, IPX, AppleTalk. |
| **Эффективность использования сети** | Менее эффективен, так как генерирует больше трафика из-за периодических обновлений. | Более эффективен, так как обновления отправляются только при изменениях. |
| **Использование резервных маршрутов** | Не поддерживается.                        | Поддерживает резервные маршруты (Feasible Successors). |
| **Применение в современных сетях** | Практически не используется, устарел.      | Широко используется в корпоративных сетях. |

## Таблицы EIGRP


В протоколе маршрутизации **EIGRP** используются три ключевые таблицы, каждая из которых выполняет свою функцию в процессе маршрутизации. Рассмотрим их подробно:

### 1. **Таблица соседей (Neighbor Table)**

#### Описание:
Таблица соседей содержит список маршрутизаторов, которые установили соседство с данным маршрутизатором через процесс EIGRP.

#### Содержимое таблицы:
- IP-адрес соседнего маршрутизатора.
- Интерфейс, через который установлен сосед.
- Время, прошедшее с последнего полученного **Hello-пакета** от соседа (Hold Timer).
- Информация о том, поддерживается ли сосед в активном состоянии.

#### Пример:
```
EIGRP-IPv4 Neighbors for AS(100):
H   Address        Interface        Hold   Uptime   SRTT   RTO   Q   Seq
0   192.168.1.2    Gi0/0            12     00:15:12  1     5000  0   18
1   192.168.2.3    Gi0/1            10     00:10:45  2     5000  0   20
```

- **H**: Номер соседа в списке.
- **Address**: IP-адрес соседа.
- **Interface**: Интерфейс, через который установлено соседство.
- **Hold**: Время до истечения таймера.
- **Uptime**: Длительность соседства.
- **SRTT (Smooth Round Trip Time)**: Среднее время ответа соседа.
- **RTO (Retransmission Timeout)**: Тайм-аут передачи.
- **Q**: Количество пакетов в очереди.
- **Seq**: Номер последовательности сообщений.

### 2. **Топологическая таблица (Topology Table)**

#### Описание:
Топологическая таблица содержит маршруты, о которых маршрутизатор получил информацию от соседей. На основании этой таблицы выбираются лучшие маршруты для включения в таблицу маршрутизации.

#### Содержимое таблицы:
- Список известных маршрутов.
- Метрики каждого маршрута.
- Тип маршрута (Successor, Feasible Successor или Active Route).

#### Пример:
```
P 192.168.1.0/24, 1 successors, FD is 256000
        via 192.168.2.1 (256000/128000), GigabitEthernet0/0
P 10.0.0.0/8, 1 successors, FD is 307200
        via 192.168.2.2 (307200/281600), GigabitEthernet0/1
```

- **P**: Статус сети (Passive — стабильное состояние; Active — процесс выбора маршрута).
- **192.168.1.0/24**: Префикс сети.
- **1 successors**: Количество Successor маршрутов (оптимальных маршрутов).
- **FD (Feasible Distance)**: Общая метрика до сети.
- **192.168.2.1 (256000/128000)**: IP-адрес соседа, RD (Reported Distance) и FD.
- **GigabitEthernet0/0**: Интерфейс выхода к сети.


### 3. **Таблица маршрутизации (Routing Table)**

#### Описание:
Таблица маршрутизации содержит маршруты, которые протокол EIGRP определил как лучшие (Successor Routes). Эти маршруты используются маршрутизатором для пересылки трафика.

#### Содержимое таблицы:
- Лучший маршрут до каждой сети.
- Метрика маршрута.
- Интерфейс выхода.

#### Пример:
```
D   192.168.1.0/24 [90/256000] via 192.168.2.1, 00:00:33, GigabitEthernet0/0
D   10.0.0.0/8 [90/307200] via 192.168.2.2, 00:00:33, GigabitEthernet0/1
```

- **D**: Указывает, что маршрут получен через EIGRP.
- **192.168.1.0/24**: Сеть назначения.
- **[90/256000]**: Административная дистанция (90) и метрика маршрута (256000).
- **via 192.168.2.1**: IP-адрес соседа, через которого доступна сеть.
- **GigabitEthernet0/0**: Интерфейс выхода.
